{% load forms %}
<div class="row" ng-if="currentStep.controller.state == 'initial'">
    <div class="col-sm-8">
      <h4>Hospital number</h4>
      <input required autofocus class="form-control" type="text"
             ng-model="currentStep.controller.hospital_number"
             ng-keypress="$event.keyCode == 13 && currentStep.controller.lookup_hospital_number()"
             />
      <br />
      <button class="btn btn-primary" ng-click="currentStep.controller.lookup_hospital_number()">
        <i class="fa fa-search"></i>
        Search
      </button>
      <br />
      <p>
        If we already have your patient on the system, we can pull their
        details for you
      </p>
    </div>
</div>

<!-- Editing demographics state -->
<div class="row" ng-if="currentStep.controller.state == 'editing_demographics'">
  <div class="row">
    <div class="col-md-12">
      <form class="form-horizontal">
        <div class="form-group">
          <label class="control-label col-sm-3">Hospital</label>
                <label class="control-label col-sm-8 text-left">
                  [[ currentStep.controller.demographics.hospital_number ]]
                </label>
        </div>
        {% input "autofocus" label="First Name" model="currentStep.controller.demographics.first_name" %}
        {% input label="Surname" model="currentStep.controller.demographics.surname" %}
        {% date_of_birth_field model_name="currentStep.controller.demographics.date_of_birth" %}
        {% select label="Sex" model="currentStep.controller.demographics.sex" lookuplist="gender_list" %}
      </form>
    </div>
  </diV>
</div>
<span ng-if="currentStep.controller.state === 'has_demographics'">
<div class="row">
  <div class="col-sm-8">
    <div class="row">
      <div class="col-md-4">
        <b>Hospital #[[ currentStep.controller.demographics.hospital_number ]]</b>
      </div>
      <div class="col-md-8">
        [[ currentStep.controller.demographics.hospital_number ]]
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <b>Name</b>
      </div>
      <div class="col-md-8">
        [[ currentStep.controller.demographics.first_name ]]
        [[ currentStep.controller.demographics.surname ]]
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <b>Date of Birth</b>
      </div>
      <div class="col-md-8">
        [[ currentStep.controller.demographics.date_of_birth | shortDate ]]
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <b>Gender</b>
      </div>
      <div class="col-md-8">
        [[ currentStep.controller.demographics.sex ]]
      </div>
    </div>
    <br />
  </div>
  </div>
</span>
